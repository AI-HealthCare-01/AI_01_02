# AI Health Project 요구사항 정의서

문서 버전: v1.0  
작성일: 2026-02-20  
프로젝트 기간: 2026-02-20 ~ 2026-03-20  
배포 마감: 2026-03-13 (종료 1주 전)  
문서 목적: 프로젝트 범위, 구현 대상, 검수 기준을 명확히 합의한다.

## 1. 범위
- 필수 기능:
  - OCR 기반 의료정보 인식
  - LLM 기반 복약/생활습관 가이드 생성
  - 실시간 챗봇(대화 맥락 일부 반영)
- 선택 기능:
  - 알림 기능(가이드 완료 알림, 복약 리마인더)

## 2. 행위 주체(Actor)
- 일반 사용자: 회원가입, 로그인, 문서 업로드, 가이드 조회, 챗봇 사용, 알림 확인
- AI 워커: OCR 처리, 가이드 생성 처리, 비동기 작업 상태 갱신
- 시스템(API 서버): 인증, 검증, DB 저장, 큐 발행, 응답 반환
- 운영자(팀): 배포, 모니터링, 장애 대응

## 3. 기능적 요구사항

| ID | 구분 | 카테고리 | 요구사항 명칭 | 상세 내용 | 우선순위 | 비고 |
|---|---|---|---|---|---|---|
| REQ-001 | 기능 | 인증 | 회원가입 | 일반 사용자는 이메일, 비밀번호, 이름, 성별, 생년월일, 전화번호로 회원가입할 수 있어야 한다. | High | 이메일/전화번호 중복 불가 |
| REQ-002 | 기능 | 인증 | 로그인 | 일반 사용자는 이메일+비밀번호로 로그인할 수 있어야 하며, 성공 시 액세스 토큰을 받아야 한다. | High | refresh token은 HttpOnly 쿠키로 발급 |
| REQ-003 | 기능 | 인증 | 토큰 재발급 | 일반 사용자는 refresh token으로 액세스 토큰을 재발급 받을 수 있어야 한다. | High | refresh token 누락 시 401 |
| REQ-004 | 기능 | 인증 | 보호 API 접근 제어 | 시스템은 인증이 필요한 API 호출 시 JWT 검증 후 사용자 식별에 성공한 요청만 처리해야 한다. | High | 실패 시 401 |
| REQ-005 | 기능 | OCR | 의료문서 업로드 | 일반 사용자는 진료기록/처방전/약봉투 파일(PDF/JPG/PNG)을 업로드할 수 있어야 한다. | High | 문서 타입 저장 |
| REQ-006 | 기능 | OCR | 업로드 유효성 검증 | 시스템은 허용 확장자 외 파일, 파일 크기 초과 파일을 거절해야 한다. | High | 거절 시 400/413 |
| REQ-007 | 기능 | OCR | OCR 작업 생성 | 일반 사용자는 업로드한 문서에 대해 OCR 작업을 생성할 수 있어야 하며, 시스템은 즉시 job_id와 QUEUED 상태를 반환해야 한다. | High | 비동기 처리 |
| REQ-008 | 기능 | OCR | OCR 상태 조회 | 일반 사용자는 OCR 작업 상태(QUEUED/PROCESSING/SUCCEEDED/FAILED)를 조회할 수 있어야 한다. | High | 본인 작업만 조회 가능 |
| REQ-009 | 기능 | OCR | OCR 결과 저장 | AI 워커는 OCR 성공 시 추출 텍스트와 구조화 데이터를 DB에 저장해야 한다. | High | 실패 시 error_message 저장 |
| REQ-010 | 기능 | 가이드 | 가이드 작업 생성 | 일반 사용자는 OCR 완료 건을 기반으로 가이드 생성 작업을 요청할 수 있어야 한다. | High | job_id, QUEUED 반환 |
| REQ-011 | 기능 | 가이드 | 가이드 상태 조회 | 일반 사용자는 가이드 작업 상태를 조회할 수 있어야 한다. | High | 본인 작업만 조회 가능 |
| REQ-012 | 기능 | 가이드 | 가이드 결과 조회 | 일반 사용자는 생성된 가이드(복약/생활습관/위험도)를 조회할 수 있어야 한다. | High | 결과 JSON 반환 |
| REQ-013 | 기능 | 가이드 | 안전 고지 포함 | 시스템은 가이드 결과에 "의료진 진료 대체 불가" 고지 문구를 항상 포함해야 한다. | High | 고정 문구 |
| REQ-014 | 기능 | 챗봇 | 채팅 세션 생성 | 일반 사용자는 챗봇 세션을 생성할 수 있어야 한다. | High | 세션 상태 ACTIVE |
| REQ-015 | 기능 | 챗봇 | 메시지 송수신 | 일반 사용자는 질문 메시지를 전송하고 답변을 받아야 하며, 시스템은 질문/답변 모두 저장해야 한다. | High | USER/ASSISTANT role 저장 |
| REQ-016 | 기능 | 챗봇 | 대화 맥락 반영 | 시스템은 최소 최근 6턴(질문+답변) 대화 맥락을 반영해 답변을 생성해야 한다. | High | 턴 수는 설정값 |
| REQ-017 | 기능 | 챗봇 | 대화 이력 조회 | 일반 사용자는 세션별 대화 이력을 페이지네이션으로 조회할 수 있어야 한다. | Medium | limit/offset 지원 |
| REQ-018 | 기능 | 알림 | 알림 목록 조회 | 일반 사용자는 본인 알림 목록을 조회할 수 있어야 한다. | Medium | 선택 기능 |
| REQ-019 | 기능 | 알림 | 미읽음 개수 조회 | 일반 사용자는 미읽음 알림 개수를 조회할 수 있어야 한다. | Medium | 선택 기능 |
| REQ-020 | 기능 | 알림 | 알림 읽음 처리 | 일반 사용자는 단건 알림을 읽음 처리할 수 있어야 한다. | Medium | 선택 기능 |
| REQ-021 | 기능 | 알림 | 전체 읽음 처리 | 일반 사용자는 본인 알림을 전체 읽음 처리할 수 있어야 한다. | Medium | 선택 기능 |
| REQ-022 | 기능 | 알림 | 가이드 완료 알림 발행 | 시스템은 가이드 생성 성공 시 GUIDE_READY 유형 알림을 자동 생성해야 한다. | Medium | 선택 기능 |
| REQ-023 | 기능 | 알림 | 복약 리마인더 관리 | 일반 사용자는 복약 리마인더를 생성/조회/수정/삭제할 수 있어야 한다. | Low | 선택 기능 확장 |
| REQ-024 | 기능 | 예외처리 | OCR 실패 처리 | AI 워커 OCR 실패 시 상태를 FAILED로 변경하고, 사용자 조회 응답에 실패 사유를 노출해야 한다. | High | 재시도 여부 별도 설정 |
| REQ-025 | 기능 | 예외처리 | 가이드 생성 실패 처리 | LLM 호출 실패/시간초과 시 상태를 FAILED로 저장하고 실패 사유를 반환해야 한다. | High | 타임아웃 기준 적용 |
| REQ-026 | 기능 | 권한 | 리소스 접근 권한 | 시스템은 사용자 본인 데이터(문서/작업/가이드/채팅/알림)만 접근 허용해야 한다. | High | 타 사용자 접근 403/404 |

## 4. 비기능적 요구사항

| ID | 구분 | 카테고리 | 요구사항 명칭 | 상세 내용 | 우선순위 | 비고 |
|---|---|---|---|---|---|---|
| REQ-101 | 비기능 | 성능 | API 응답 지연 | 핵심 API의 P95 Latency는 3초 이내여야 한다. | High | 평가 기준 직접 반영 |
| REQ-102 | 비기능 | 성능 | 비동기 요청 즉시 응답 | OCR/가이드 작업 생성 API는 1초 이내에 `202 Accepted`를 반환해야 한다. | High | 무거운 처리 금지 |
| REQ-103 | 비기능 | 안정성 | 비동기 상태 일관성 | Job 상태 전이는 `QUEUED -> PROCESSING -> SUCCEEDED/FAILED`만 허용한다. | High | 불가능 전이 차단 |
| REQ-104 | 비기능 | 보안 | 인증/암호화 | 비밀번호는 단방향 해시로 저장하고, 인증은 JWT 기반으로 처리해야 한다. | High | 평문 저장 금지 |
| REQ-105 | 비기능 | 보안 | 쿠키 보안 옵션 | 운영환경에서 refresh token 쿠키는 HttpOnly+Secure 옵션을 사용해야 한다. | High | SameSite 정책 명시 |
| REQ-106 | 비기능 | 품질 | 결과 편차 최소화 | 동일 입력에 대해 가이드 결과 편차가 과도하지 않도록 temperature/seed/prompt version을 고정해야 한다. | High | 모델 품질 항목 대응 |
| REQ-107 | 비기능 | 모니터링 | 추적 가능한 로그 | API와 워커 로그에 request_id/job_id/user_id를 남겨 장애 원인 추적이 가능해야 한다. | High | 개인정보 마스킹 |
| REQ-108 | 비기능 | 테스트 | 자동 검증 | CI에서 테스트/린트/타입체크가 모두 통과해야 배포 가능하다. | High | pytest/ruff/mypy |
| REQ-109 | 비기능 | 배포 | 배포 완료 시점 | 프로젝트 종료 1주 전(2026-03-13)까지 스테이징/운영 배포가 완료되어야 한다. | High | 평가 일정 준수 |
| REQ-110 | 비기능 | 확장성 | 구조 확장성 | OCR/LLM 모델 교체 시 API 계약 변경 없이 워커 레이어에서 교체 가능해야 한다. | Medium | 추후 고도화 대비 |
| REQ-111 | 비기능 | 데이터 | 저장 포맷 표준화 | 문서, OCR 결과, 가이드, 채팅 데이터는 UTF-8과 JSON 스키마를 일관되게 사용해야 한다. | Medium | 한글 깨짐 방지 |
| REQ-112 | 비기능 | 가용성 | 장애 복구 | 배포 후 장애 발생 시 30분 이내 롤백 또는 임시복구 절차를 수행할 수 있어야 한다. | Medium | 운영 체크리스트 필요 |

## 5. 범위 제외(Out of Scope)
- 병원 EMR 실시간 연동
- 의료 진단 확정/처방 대체 기능
- 멀티언어 지원
- 고도화된 개인화 추천 엔진

## 6. 검수 체크리스트
- 기능 요구사항 High 항목(REQ-001~017, 024~026)이 모두 구현되었는가
- 비기능 요구사항 High 항목(REQ-101~109)이 측정 가능하게 검증되었는가
- 선택 기능(REQ-018~023)은 시간/리소스 상황에 따라 반영 여부를 명시했는가
- 최종 결과가 본 문서 기준과 일치하는가
